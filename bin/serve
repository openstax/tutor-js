#!/bin/bash

set -e

bin/checkinputs "$@"

export OX_PROJECT=$1
echo Serving: $OX_PROJECT

source $OX_PROJECT/.env

is_port='^[0-9]{4}$'

if [[ $OX_DASHBOARD_SOCKET =~ $is_port ]]; then
  options="-p ${OX_DASHBOARD_SOCKET}"
fi

webpack-dashboard $options -- webpack-dev-server --config webpack.config.js
