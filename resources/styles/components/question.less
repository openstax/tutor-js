@correct-answer-color: @tutor-success;
@correct-answer-background: lighten(@tutor-success, 40%);
@wrong-answer-color: @tutor-danger;
@wrong-answer-background: lighten(@tutor-danger, 55%);

@answer-background: lighten(@tutor-info, 53%);
@answer-hover-color: lighten(@tutor-info, 48%);
@answer-select-color: lighten(@tutor-info, 45%); // darker than hover

@free-response-color: @tutor-neutral-dark;

@answer-label-color: @tutor-neutral-dark;

@answer-height: 60px;

.answer-label() {
  display: inline-block;
  float: left;
  #fonts > .script();
  color: @answer-label-color;
  margin-top: 5px;
  margin-bottom: 5px;
}

.question {
  .size-exercise-card();
  .clearfix();

  counter-reset: answer 0;
  #fonts > .sans (2.1rem, 3rem);
  font-weight: 400;
  padding-top: .5em;

  .free-response,
  .free-response:before,
  .question-feedback,
  .question-feedback:before {
    font-size: 4rem/2rem;
    font-weight: 300;
  }
  .free-response {
    font-style: italic;
    color: @free-response-color;
    padding: 15px 40px;
    display: block;
    width: 100%;
    margin: 20px 0 5px 0;
    background: #f5f5f5;

    &:before {
      content: "My Answer:";
      margin-left: -145px;
      .answer-label();
    }
  }
  .multiple-choice-prompt {
    display: block;
    margin: 30px 0 10px 0;
  }
  .question-feedback {
    margin: 20px 0 10px 0;
    display: block;
    float: left;

    &:before {
      content: "Why?";
      margin-left: -56px;
      .answer-label();
    }
  }

  .card-content {
    margin-left: 4rem; // Enough room for double-digit question numbers

    .question-stem {
      font-size: 1.2rem;
      margin-top: 1.5rem;
      margin-bottom: 1.5rem;
      min-height: 2rem; // center with the 3rem question number
    }

  }

  .answers-table {
    font-size: 0.8em;
    width: 100%;
    float: left;
    padding: 0 0 20px 0;

    .answers-answer {
      counter-increment: answer 1;
      display: block;
      width: 100%;
      clear: both;

      .answer-letter {
        display: table-cell;
        width: 2rem;
        &:after { content: counter(answer, lower-latin) ')'; }
      }

      .answer-content {
        display: table-cell;
        padding: 15px 40px 15px 0;
      }
    }

    label.answer-label {
      display: table;
      margin: 5px 0;
      padding-left: 40px;
      #fonts > .sans (2rem);
      font-weight: 400;
      width: 100%;
      float: left;
      background: @answer-background;
      transition: background-color .1s ease-in;
      cursor: pointer;

      &:hover {
        background-color: @answer-hover-color;
      }
    }
  }

  .answer-input-box {
    display: none;
    float: left;
    margin: 0.95em 0;
    margin-left: -30px;

    &:checked + label.answer-label,
    &:checked + label.answer-label:hover {
      font-weight: 600;
      background-color: @answer-select-color; // darker than hover
    }
  }

  &.has-correct-answer {

    .answers-table {

      .answers-answer label.answer-label {
        padding-left: 40px;
        cursor: auto;
      }

      // For questions showing feedback,
      // if the answers are not correct and are not chosen, hide the distracting answer.
      // answers-answer still needs to render so that answer-letter increments as expected.
      .answers-answer:not(.answer-correct):not(.answer-checked) .answer-label{
        display: none;
      }

      .answer-correct:not(.answer-checked):before {
        content: "Correct Answer:";
        margin-left: -145px;
        .answer-label();
        line-height: @answer-height;
      }

      .answer-checked {
        &:before{
          display: inline-block;
          float: left;
          text-align: right;
          font-size: 3.5em;
          width: 65px;
          margin-top: .125em;
          margin-left: -80px;
        }
        &.answer-correct:before {
          content: @fa-var-check;
          color: @correct-answer-color;
        }
        &:not(.answer-correct):before {
          content: @fa-var-close;
          color: @wrong-answer-color;
        }
      }

      .answer-correct .answer-label {
        background-color: @correct-answer-background;
        color: @correct-answer-color;
        font-weight: 900;

        .answer-content:hover {
          background-color: @correct-answer-background;
        }
      }

      .answer-checked:not(.answer-correct) .answer-label {
        background-color: @wrong-answer-background;
        color: @wrong-answer-color;
        font-weight: 900;

        .answer-content:hover {
          background-color: @wrong-answer-background;
        }
      }
    }
  }
}