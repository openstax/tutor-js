.highlight-animation() {
  -webkit-animation: book-content-target-highlight 1.5s ease-out;
  animation: book-content-target-highlight 1.5s ease-out;
}

.highlight-target() {
  background-color: @tutor-highlight;
}

.highlight-target(will-transition) {
  .transition(background-color .5s ease-out);
}

a[target=_blank] { .tutor-external-link-indicator(); }

figure {
  .highlight-target(will-transition);

  &:target, &.link-target, &.target-scroll {
    img {
      mix-blend-mode: multiply;
    }
  }


  &:target, &.link-target {
    .highlight-animation();

    > * {
      .highlight-animation();
    }
  }

  &.target-scroll {
    .highlight-target();

    > * {
      .highlight-target();
    }
  }

}

section, div, span, table {

  &::after {
    .highlight-target(will-transition);
  }

  &:target, &.link-target, &.target-scroll {
    position: relative;

    img {
      mix-blend-mode: multiply;
    }

    &::after {
      content: ' ';
      width: 100%;
      height: 100%;
      position: absolute;
      top: 0;
      mix-blend-mode: multiply;
    }
  }

  &:target, &.link-target {
    &::after {
      .highlight-animation();
    }
  }

  &.target-scroll::after {
    .highlight-target();
  }
}

@-webkit-keyframes book-content-target-highlight {
  0% {
    .highlight-target();
  }
  100% {
    background-color: transparent;
  }
}

@keyframes book-content-target-highlight {
  0% {
    .highlight-target();
  }
  100% {
    background-color: transparent;
  }
}
